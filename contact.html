<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Contact | Kingstein</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, 0.1);
        border: solid rgba(0, 0, 0, 0.15);
        border-width: 1px 0;
        box-shadow: inset 0 0.5em 1.5em rgba(0, 0, 0, 0.1),
          inset 0 0.125em 0.5em rgba(0, 0, 0, 0.15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -0.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }

      .bd-mode-toggle {
        z-index: 1500;
      }

      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }

      .custom-underline {
        border-bottom: 2px solid #b85311;
        padding-bottom: 5px;
        display: inline-block;
      }

      /* Navbar Styles */
      .navbar-toggler {
        border: 0 !important;
      }

      .navbar-toggler:focus,
      .navbar-toggler:active,
      .navbar-toggler-icon:focus {
        outline: none !important;
        box-shadow: none !important;
        border: 0 !important;
      }

      .toggler-icon {
        width: 30px;
        height: 3px;
        background-color: #ffffff;
        display: block;
        transition: all 0.2s;
      }

      .middle-bar {
        margin: 5px auto;
      }

      .navbar-toggler .top-bar {
        transform: rotate(45deg);
        transform-origin: 10% 10%;
      }

      .navbar-toggler .middle-bar {
        opacity: 0;
        filter: alpha(opacity=0);
      }

      .navbar-toggler .bottom-bar {
        transform: rotate(-45deg);
        transform-origin: 10% 90%;
      }

      .navbar-toggler.collapsed .top-bar {
        transform: rotate(0);
      }

      .navbar-toggler.collapsed .middle-bar {
        opacity: 1;
        filter: alpha(opacity=100);
      }

      .navbar-toggler.collapsed .bottom-bar {
        transform: rotate(0);
      }

      .navbar-toggler.collapsed .toggler-icon {
        background-color: #ffffff;
      }

      /* Form Styles */
      .form-control:focus {
        border-color: #b85311;
        box-shadow: 0 0 0 0.25rem rgba(184, 83, 17, 0.25);
      }

      .btn:disabled {
        opacity: 0.65;
        cursor: not-allowed;
      }

      .alert {
        margin-top: 1rem;
        margin-bottom: 0;
      }
    </style>
  </head>
  <body class="bg-black">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html">
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Franz Kingstein
        </a>
        <button
          class="navbar-toggler collapsed"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="toggler-icon top-bar"></span>
          <span class="toggler-icon middle-bar"></span>
          <span class="toggler-icon bottom-bar"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="../index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="certificates.html">Certificates</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="contact.html">Get in Touch</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="px-1 text-centre">
      <section class="">
        <div class="container">
          <div class="row justify-content-md-center">
            <div class="col-12 col-md-10 col-lg-8 col-xl-7 col-xxl-6 py-5">
              <h2 class="text-center text-white pt-5 display-3">
                <b><span class="custom-underline">Contact Me!</span></b>
              </h2>
              <hr class="w-50 mx-auto mb-5 mb-xl-9 border-dark-subtle" />
            </div>
          </div>
        </div>

        <div class="container">
          <div class="row justify-content-lg-center">
            <div class="col-12 col-lg-9">
              <div
                class="bg-opacity-5 border rounded shadow-sm overflow-hidden"
                style="background-color: rgb(68, 68, 68)"
              >
                <div id="alertPlaceholder"></div>

                <form id="contactForm" novalidate>
                  <div class="row gy-4 gy-xl-5 p-4 p-xl-5">
                    <div class="col-12">
                      <label for="fullname" class="form-label text-white">
                        Full Name <span class="text-danger">*</span>
                      </label>
                      <input
                        type="text"
                        class="form-control"
                        id="fullname"
                        name="name"
                        required
                      />
                      <div class="invalid-feedback">
                        Please provide your full name.
                      </div>
                    </div>
                    <div class="col-12">
                      <label for="email" class="form-label text-white">
                        Email <span class="text-danger">*</span>
                      </label>
                      <div class="input-group has-validation">
                        <span class="input-group-text">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            fill="currentColor"
                            class="bi bi-envelope"
                            viewBox="0 0 16 16"
                          >
                            <path
                              d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"
                            />
                          </svg>
                        </span>
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          name="email"
                          required
                        />
                        <div class="invalid-feedback">
                          Please provide a valid email address.
                        </div>
                      </div>
                    </div>
                    <div class="col-12">
                      <label for="message" class="form-label text-white">
                        Message <span class="text-danger">*</span>
                      </label>
                      <textarea
                        class="form-control"
                        id="message"
                        name="message"
                        rows="3"
                        required
                      ></textarea>
                      <div class="invalid-feedback">
                        Please provide your message.
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="d-grid">
                        <button
                          class="btn btn-lg"
                          type="submit"
                          style="background-color: #b85311; color: white"
                        >
                          <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                          <span class="button-text">Submit</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="footer pt-5 text-white text-center">
        <div class="container">
          <div class="row">
            <div class="col">
              <p>
                Developed by
                <a
                  href="https://nexrof.in"
                  class="text-white"
                  target="_blank"
                  rel="noopener noreferrer"
                  >Nexrof
                </a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </main>

    <script>
      // Wait for the DOM to be fully loaded
document.addEventListener('DOMContentLoaded', function() {
    // Form submission handler
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();

        // Form validation check
        if (!this.checkValidity()) {
            e.stopPropagation();
            this.classList.add('was-validated');
            return;
        }

        submitForm();
    });

    // Function to handle form submission
    function submitForm() {
        const form = document.getElementById('contactForm');
        const submitButton = form.querySelector('button[type="submit"]');
        const spinner = submitButton.querySelector('.spinner-border');
        const buttonText = submitButton.querySelector('.button-text');
        
        // Update UI to show loading state
        setLoadingState(true, submitButton, spinner, buttonText);
        
        // Collect and prepare form data
        const formData = new FormData(form);
        const jsonObject = {
            api_key: 'e86f28af4740f30c558815bd93d71964',
            template: '5'
        };
        
        // Convert FormData to JSON object
        formData.forEach((value, key) => {
            jsonObject[key] = value;
        });

        // Send API request
        fetch('https://api.hlomail.in/v1/contact-mail', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify(jsonObject)
        })
        .then(handleResponse)
        .then(data => {
            handleSuccess(form);
        })
        .catch(error => {
            handleError(error);
        })
        .finally(() => {
            // Reset UI state
            setLoadingState(false, submitButton, spinner, buttonText);
        });
    }

    // Helper function to handle fetch response
    function handleResponse(response) {
        if (!response.ok) {
            return response.json().then(err => Promise.reject(err));
        }
        return response.json();
    }

    // Helper function to handle successful submission
    function handleSuccess(form) {
        showAlert('Message sent successfully! We\'ll get back to you soon.', 'success');
        form.reset();
        form.classList.remove('was-validated');
    }

    // Helper function to handle errors
    function handleError(error) {
        console.error('Error:', error);
        let errorMessage = 'There was an error sending your message. Please try again later.';
        
        if (error.detail && Array.isArray(error.detail)) {
            errorMessage = error.detail.map(err => err.msg).join('. ');
        }
        
        showAlert(errorMessage, 'danger');
    }

    // Helper function to set loading state
    function setLoadingState(isLoading, button, spinner, buttonText) {
        button.disabled = isLoading;
        if (isLoading) {
            spinner.classList.remove('d-none');
            buttonText.textContent = 'Sending...';
        } else {
            spinner.classList.add('d-none');
            buttonText.textContent = 'Submit';
        }
    }

    // Function to show alerts
    function showAlert(message, type) {
        const alertPlaceholder = document.getElementById('alertPlaceholder');
        const wrapper = document.createElement('div');
        
        wrapper.innerHTML = `
            <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        `;

        // Clear existing alerts
        alertPlaceholder.innerHTML = '';
        alertPlaceholder.appendChild(wrapper);

        // Auto-dismiss alert after 5 seconds
        setTimeout(() => {
            const alert = wrapper.querySelector('.alert');
            if (alert) {
                const bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            }
        }, 5000);
    }

    // Form input validation handlers
    const inputs = document.querySelectorAll('form input, form textarea');
    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            if (this.value.trim() !== '') {
                this.classList.add('was-validated');
            }
        });

        input.addEventListener('input', function() {
            if (this.value.trim() === '') {
                this.classList.remove('was-validated');
            }
        });
    });

    // Email validation
    const emailInput = document.getElementById('email');
    emailInput.addEventListener('input', function() {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (this.value && !emailRegex.test(this.value)) {
            this.setCustomValidity('Please enter a valid email address');
        } else {
            this.setCustomValidity('');
        }
    });
});

// Optional: Navbar collapse handler for mobile
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.nav-link');
    const navbarCollapse = document.querySelector('.navbar-collapse');
    const navbarToggler = document.querySelector('.navbar-toggler');

    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (navbarCollapse.classList.contains('show')) {
                navbarToggler.click();
            }
        });
    });
});